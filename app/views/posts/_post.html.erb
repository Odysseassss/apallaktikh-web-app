<div style="position: relative; height: auto; margin-bottom: 20px;" class="post-card-container">

  <%= link_to post, id: dom_id(post), style: "text-decoration: none; color: inherit; display: block;" do %>
    
    <div style="border: 1px solid #444; border-radius: 12px; padding: 20px; background-color: #2c3035; color: white; box-shadow: 0 4px 6px rgba(0,0,0,0.5); transition: transform 0.2s, box-shadow 0.2s; height: auto; min-height: fit-content; display: flex; flex-direction: column; justify-content: space-between;"
         class="post-card">

      <div>
        <h2 style="margin-top: 0; font-size: 1.5rem; color: #0081c9;"><%= post.title %></h2>
        <span style="background-color: #444; color: #fff; padding: 4px 10px; border-radius: 4px; font-size: 0.75rem; font-weight: bold; text-transform: uppercase;">
          <%= post.category.name if post.category %>
        </span>

        <p style="color: #ced4da; margin-top: 15px; line-height: 1.5; word-wrap: break-word;">
		  <% if action_name == 'index' %>
			<%= truncate(post.body, length: 50) %>
		  <% else %>
			<%= post.body %>
		  <% end %>
		</p>
      </div>

      <div style="border-top: 1px solid #444; margin-top: 15px; padding-top: 12px;">
        <small style="color: #888; display: block; font-size: 0.65rem;">AUTHOR</small>
        <span style="color: #adb5bd; font-size: 0.85rem; display: block; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; max-width: 150px;">
          <%= post.user.name %>
        </span>
      </div>
    </div>
  <% end %>
  
  <% if user_signed_in? && post.user != current_user %>
    <div id="contact_status_<%= post.id %>" style="position: absolute; bottom: 12px; right: 20px; z-index: 999;">
      <% status = current_user.contact_status_with(post.user) %>

      <% if status == 'accepted' %>
        <span style="font-size: 0.8rem; color: #198754; font-weight: bold;">✓ Friends</span>
      <% elsif status == 'pending_sent' %>
        <span style="font-size: 0.8rem; color: #ffc107; font-weight: bold;">⌛ Sent</span>
      <% else %>
        <%= link_to "Add Contact", contacts_path(friend_id: post.user.id, post_id: post.id),
            data: { turbo_method: :post },
            style: "background-color: #0081c9; color: white; padding: 8px 14px; border-radius: 6px; text-decoration: none; font-size: 0.75rem; font-weight: bold; display: inline-block;" %>
      <% end %>
    </div>
  <% end %>

</div>